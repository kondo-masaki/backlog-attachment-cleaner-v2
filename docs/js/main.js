(()=>{"use strict";var e,t,n,r={6523:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1601),s=n.n(r),o=n(6314),a=n.n(o)()(s());a.push([e.id,"* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  padding: 20px;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  background-color: #f5f5f5;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.header {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n}\n\n.header h1 {\n  margin: 0 0 10px 0;\n  color: #333;\n  font-size: 24px;\n}\n\n.header p {\n  margin: 0;\n  color: #666;\n  font-size: 14px;\n}\n\n.form-section {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n}\n\ninput[type=\"text\"],\ninput[type=\"password\"] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.input-group {\n  display: flex;\n  gap: 10px;\n}\n\n.input-group input {\n  flex: 1;\n}\n\n.button {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  background-color: #007bff;\n  color: white;\n  cursor: pointer;\n  font-size: 14px;\n  transition: background-color 0.2s;\n}\n\n.button:hover {\n  background-color: #0056b3;\n}\n\n.button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.button.danger {\n  background-color: #dc3545;\n}\n\n.button.danger:hover {\n  background-color: #c82333;\n}\n\n.search-tabs {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.tab-button {\n  padding: 8px 16px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: white;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.tab-button.active {\n  background-color: #007bff;\n  color: white;\n  border-color: #007bff;\n}\n\n.results-section {\n  margin-top: 30px;\n}\n\n.stats {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-radius: 4px;\n}\n\n.actions {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.issue-card {\n  margin-bottom: 20px;\n  padding: 15px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.issue-header {\n  margin-bottom: 15px;\n}\n\n.issue-header h3 {\n  margin: 0;\n  color: #007bff;\n}\n\n.issue-summary {\n  color: #666;\n  margin-top: 5px;\n}\n\n.attachment-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.attachment-info {\n  flex: 1;\n}\n\n.attachment-name {\n  font-weight: 500;\n}\n\n.attachment-size {\n  color: #666;\n  font-size: 0.9em;\n}\n\n.comment-badge {\n  display: inline-block;\n  padding: 2px 6px;\n  margin-left: 8px;\n  background-color: #e9ecef;\n  border-radius: 3px;\n  font-size: 0.8em;\n  color: #666;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  cursor: pointer;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #007bff;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.loading-text {\n  margin-top: 10px;\n  color: #666;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-message {\n  padding: 10px;\n  margin: 10px 0;\n  background-color: #f8d7da;\n  border: 1px solid #f5c6cb;\n  border-radius: 4px;\n  color: #721c24;\n}\n\n.success-message {\n  padding: 10px;\n  margin: 10px 0;\n  background-color: #d4edda;\n  border: 1px solid #c3e6cb;\n  border-radius: 4px;\n  color: #155724;\n}\n\n.comment-badge {\n  background: #17a2b8;\n  color: white;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  margin-left: 8px;\n  font-weight: 500;\n}\n\n.comment-preview {\n  font-size: 12px;\n  color: #666;\n  margin-top: 4px;\n  font-style: italic;\n  background: #f8f9fa;\n  padding: 4px 8px;\n  border-radius: 3px;\n  border-left: 3px solid #17a2b8;\n}\n\n.help-text {\n  margin-top: 8px;\n  font-size: 12px;\n  color: #666;\n  line-height: 1.4;\n}\n",""]);const i=a},8907:(e,t,n)=>{var r=n(4848),s=n(6540),o=n(5338),a=n(1083),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},u=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},d=function(){function e(e,t){var n=this;this.spaceUrl=e,this.apiKey=t,this.baseURL="".concat(e.replace(/\/$/,""),"/api/v2"),this.client=a.A.create({baseURL:this.baseURL,params:{apiKey:this.apiKey}}),this.rateLimit={limit:null,remaining:null,reset:null},this.client.interceptors.response.use((function(e){return n.updateRateLimit(e.headers),e}),(function(e){return e.response&&n.updateRateLimit(e.response.headers),Promise.reject(e)}))}return e.prototype.updateRateLimit=function(e){var t,n;e["x-ratelimit-limit"]&&(this.rateLimit.limit=parseInt(e["x-ratelimit-limit"],10)),e["x-ratelimit-remaining"]&&(this.rateLimit.remaining=parseInt(e["x-ratelimit-remaining"],10)),e["x-ratelimit-reset"]&&(this.rateLimit.reset=parseInt(e["x-ratelimit-reset"],10)),console.log("レート制限: ".concat(null!==(t=this.rateLimit.remaining)&&void 0!==t?t:"不明","/").concat(null!==(n=this.rateLimit.limit)&&void 0!==n?n:"不明"," (リセット: ").concat(this.rateLimit.reset?new Date(1e3*this.rateLimit.reset).toLocaleTimeString():"不明",")"))},e.prototype.checkRateLimit=function(){return c(this,void 0,void 0,(function(){var e,t,n;return l(this,(function(r){switch(r.label){case 0:return null!==this.rateLimit.remaining&&this.rateLimit.remaining<=5?(e=Math.floor(Date.now()/1e3),(t=Math.max(0,(null!==(n=this.rateLimit.reset)&&void 0!==n?n:0)-e+1))>0?(console.log("レート制限に近づいています。".concat(t,"秒待機します...")),[4,this.sleep(1e3*t)]):[3,2]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.executeWithRetry=function(e){return c(this,arguments,void 0,(function(e,t){var n,r,s,o,a;return void 0===t&&(t=3),l(this,(function(i){switch(i.label){case 0:n=1,i.label=1;case 1:if(!(n<=t))return[3,10];i.label=2;case 2:return i.trys.push([2,5,,9]),[4,this.checkRateLimit()];case 3:return i.sent(),[4,e()];case 4:return[2,i.sent()];case 5:if(r=i.sent(),429!==(null===(a=r.response)||void 0===a?void 0:a.status))return[3,7];if(s=r.response.headers["retry-after"],o=s?parseInt(s,10):1e3*Math.pow(2,n),console.log("レート制限エラー (試行 ".concat(n,"/").concat(t,"): ").concat(o/1e3,"秒後にリトライします...")),n===t)throw r;return[4,this.sleep(o)];case 6:return i.sent(),[3,8];case 7:throw r;case 8:return[3,9];case 9:return n++,[3,1];case 10:throw new Error("最大リトライ回数に達しました")}}))}))},e.prototype.getProjects=function(){return c(this,void 0,void 0,(function(){var e,t,n,r,s;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.client.get("/projects")];case 1:return[2,o.sent().data];case 2:throw e=o.sent(),new Error("プロジェクト取得エラー: ".concat((null===(s=null===(r=null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.errors)||void 0===r?void 0:r[0])||void 0===s?void 0:s.message)||e.message));case 3:return[2]}}))}))},e.prototype.getIssues=function(e){return c(this,arguments,void 0,(function(e,t){var n,r,s,o,a,c;return void 0===t&&(t={}),l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),n=i({projectId:[e],count:100},t),[4,this.client.get("/issues",{params:n})];case 1:return[2,l.sent().data];case 2:throw r=l.sent(),new Error("課題取得エラー: ".concat((null===(c=null===(a=null===(o=null===(s=r.response)||void 0===s?void 0:s.data)||void 0===o?void 0:o.errors)||void 0===a?void 0:a[0])||void 0===c?void 0:c.message)||r.message));case 3:return[2]}}))}))},e.prototype.getIssueDetail=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o;return l(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.client.get("/issues/".concat(e))];case 1:return[2,a.sent().data];case 2:throw t=a.sent(),new Error("課題詳細取得エラー: ".concat((null===(o=null===(s=null===(r=null===(n=t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.errors)||void 0===s?void 0:s[0])||void 0===o?void 0:o.message)||t.message));case 3:return[2]}}))}))},e.prototype.getIssueByKey=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.client.get("/issues/".concat(e))];case 1:return[2,i.sent().data];case 2:if(t=i.sent(),404===(null===(n=t.response)||void 0===n?void 0:n.status))return[2,null];throw new Error("課題取得エラー: ".concat((null===(a=null===(o=null===(s=null===(r=t.response)||void 0===r?void 0:r.data)||void 0===s?void 0:s.errors)||void 0===o?void 0:o[0])||void 0===a?void 0:a.message)||t.message));case 3:return[2]}}))}))},e.prototype.getIssueAttachments=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o;return l(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.client.get("/issues/".concat(e,"/attachments"))];case 1:return[2,a.sent().data];case 2:throw t=a.sent(),new Error("添付ファイル取得エラー: ".concat((null===(o=null===(s=null===(r=null===(n=t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.errors)||void 0===s?void 0:s[0])||void 0===o?void 0:o.message)||t.message));case 3:return[2]}}))}))},e.prototype.getIssueComments=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o;return l(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.client.get("/issues/".concat(e,"/comments"))];case 1:return[2,a.sent().data];case 2:throw t=a.sent(),new Error("コメント取得エラー: ".concat((null===(o=null===(s=null===(r=null===(n=t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.errors)||void 0===s?void 0:s[0])||void 0===o?void 0:o.message)||t.message));case 3:return[2]}}))}))},e.prototype.deleteAttachment=function(e,t){return c(this,void 0,void 0,(function(){var n,r,s,o,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.client.delete("/issues/".concat(e,"/attachments/").concat(t))];case 1:return[2,i.sent().data];case 2:throw n=i.sent(),new Error("添付ファイル削除エラー: ".concat((null===(a=null===(o=null===(s=null===(r=n.response)||void 0===r?void 0:r.data)||void 0===s?void 0:s.errors)||void 0===o?void 0:o[0])||void 0===a?void 0:a.message)||n.message));case 3:return[2]}}))}))},e.prototype.deleteCommentAttachment=function(e,t,n){return c(this,void 0,void 0,(function(){var r,s,o,a,i;return l(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.client.delete("/issues/".concat(e,"/comments/").concat(t,"/attachments/").concat(n))];case 1:return[2,c.sent().data];case 2:throw r=c.sent(),new Error("コメント添付ファイル削除エラー: ".concat((null===(i=null===(a=null===(o=null===(s=r.response)||void 0===s?void 0:s.data)||void 0===o?void 0:o.errors)||void 0===a?void 0:a[0])||void 0===i?void 0:i.message)||r.message));case 3:return[2]}}))}))},e.prototype.getIssuesWithAttachments=function(e){return c(this,arguments,void 0,(function(e,t){var n,r,s,o,a,i,c,u,d,h,p,m,f;return void 0===t&&(t=null),l(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,8,,9]),n=[],!(t&&t.from&&t.to))return[3,5];r=this.extractIssueNumber(t.from),s=this.extractIssueNumber(t.to),o=t.from.split("-")[0],console.log("課題範囲検索: ".concat(o,"-").concat(r," から ").concat(o,"-").concat(s)),a=r,l.label=1;case 1:return a<=s?(i="".concat(o,"-").concat(a),[4,this.getIssueByKey(i)]):[3,4];case 2:(c=l.sent())&&c.attachments.length>0&&n.push(c),l.label=3;case 3:return a++,[3,1];case 4:return[3,7];case 5:return[4,this.getIssues(e)];case 6:u=l.sent(),n=u.filter((function(e){return e.attachments.length>0})),l.label=7;case 7:return[2,n];case 8:throw d=l.sent(),new Error("課題取得エラー: ".concat((null===(f=null===(m=null===(p=null===(h=d.response)||void 0===h?void 0:h.data)||void 0===p?void 0:p.errors)||void 0===m?void 0:m[0])||void 0===f?void 0:f.message)||d.message));case 9:return[2]}}))}))},e.prototype.extractIssueNumber=function(e){var t=e.split("-");return parseInt(t[1],10)},e.prototype.deleteMultipleAttachments=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o,a,i=this;return l(this,(function(u){switch(u.label){case 0:t=[],n=function(e){var n,s,o;return l(this,(function(a){switch(a.label){case 0:n=function(){return c(i,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return e.isCommentAttachment?[4,this.deleteCommentAttachment(e.issueId,e.commentId,e.attachmentId)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return[4,this.deleteAttachment(e.issueId,e.attachmentId)]}}))}))},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.executeWithRetry(n)];case 2:return s=a.sent(),t.push({success:!0,result:s}),[3,4];case 3:return o=a.sent(),t.push({success:!1,error:o.message}),[3,4];case 4:return[2]}}))},r=this,s=0,o=e,u.label=1;case 1:return s<o.length?(a=o[s],[5,n(a)]):[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:return[2,t]}}))}))},e.prototype.testConnection=function(){return c(this,void 0,void 0,(function(){var e,t,n,r,s;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.client.get("/users/myself")];case 1:return o.sent(),[3,3];case 2:throw e=o.sent(),new Error("接続テストエラー: ".concat((null===(s=null===(r=null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.errors)||void 0===r?void 0:r[0])||void 0===s?void 0:s.message)||e.message));case 3:return[2]}}))}))},e.prototype.getChildIssues=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t={parentIssueId:[e],count:100},[4,this.client.get("/issues",{params:t})];case 1:return[2,i.sent().data];case 2:throw n=i.sent(),new Error("子課題取得エラー: ".concat((null===(a=null===(o=null===(s=null===(r=n.response)||void 0===r?void 0:r.data)||void 0===s?void 0:s.errors)||void 0===o?void 0:o[0])||void 0===a?void 0:a.message)||n.message));case 3:return[2]}}))}))},e.prototype.getParentAndChildIssuesWithAttachments=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o,a,c,d,h,p;return l(this,(function(m){switch(m.label){case 0:return m.trys.push([0,7,,8]),[4,this.getIssueByKey(e)];case 1:if(!(t=m.sent()))throw new Error("親課題 ".concat(e," が見つかりません"));return[4,this.getChildIssues(t.id)];case 2:n=m.sent(),r=u([t],n,!0),s=[],o=function(e){var t,n,r,o,c,d,h,p,m;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,a.getIssueAttachments(e.id)];case 1:return t=l.sent(),[4,a.getIssueComments(e.id)];case 2:for(n=l.sent(),r=[],o=function(e){e.attachments&&e.attachments.length>0&&e.attachments.forEach((function(t){r.push(i(i({},t),{commentId:e.id,commentContent:e.content,isCommentAttachment:!0}))}))},c=0,d=n;c<d.length;c++)h=d[c],o(h);return(p=u(u([],t.map((function(e){return i(i({},e),{isCommentAttachment:!1})})),!0),r,!0)).length>0&&s.push(i(i({},e),{attachments:p})),[3,4];case 3:return(m=l.sent())instanceof Error&&console.warn("課題 ".concat(e.issueKey," の添付ファイル取得に失敗:"),m.message),[3,4];case 4:return[2]}}))},a=this,c=0,d=r,m.label=3;case 3:return c<d.length?(h=d[c],[5,o(h)]):[3,6];case 4:m.sent(),m.label=5;case 5:return c++,[3,3];case 6:return[2,s];case 7:throw p=m.sent(),new Error("親子課題の添付ファイル取得エラー: ".concat(p.message));case 8:return[2]}}))}))},e.prototype.deleteAllAttachmentsByIssueKey=function(e){return c(this,void 0,void 0,(function(){var t,n,r,s,o,a,c,d,h,p,m,f,g;return l(this,(function(l){switch(l.label){case 0:return[4,this.getIssueByKey(e)];case 1:if(!(t=l.sent()))throw new Error("Issue ".concat(e," not found"));return n=t.id,[4,this.getIssueAttachments(n)];case 2:return r=l.sent(),[4,this.getIssueComments(n)];case 3:for(s=l.sent(),o=[],a=function(e){e.attachments&&e.attachments.length>0&&e.attachments.forEach((function(t){o.push(i(i({},t),{commentId:e.id,isCommentAttachment:!0}))}))},c=0,d=s;c<d.length;c++)h=d[c],a(h);return 0===(p=u(u([],r.map((function(e){return{issueId:n,attachmentId:e.id,isCommentAttachment:!1,commentId:0}})),!0),o.map((function(e){return{issueId:n,attachmentId:e.id,isCommentAttachment:!0,commentId:e.commentId}})),!0)).length?[2,{success:0,failed:0}]:[4,this.deleteMultipleAttachments(p)];case 4:return m=l.sent(),f=m.filter((function(e){return e.success})).length,g=m.filter((function(e){return!e.success})).length,[2,{success:f,failed:g}]}}))}))},e}();const h=d;var p=n(9146),m=n(3840),f=n(5353),g=n(8958),b=n(1052),v=n(1570),y=n(3034),x=n(1738),w=n(5187),j=n(3812),I=n(1082),S=n(7069),k=n(63),A=n(6808),C=n(7234),E=n(4466),R=n(6944),K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},K.apply(this,arguments)},z=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},P=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},N=function(e){if(!e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][t])};var L=n(5072),T=n.n(L),B=n(7825),D=n.n(B),M=n(7659),U=n.n(M),_=n(5056),F=n.n(_),W=n(540),J=n.n(W),$=n(1113),G=n.n($),H=n(6523),Y={};Y.styleTagTransform=G(),Y.setAttributes=F(),Y.insert=U().bind(null,"head"),Y.domAPI=D(),Y.insertStyleElement=J(),T()(H.A,Y),H.A&&H.A.locals&&H.A.locals;var q=n(3515);o.createRoot(document.getElementById("root")).render((0,r.jsx)(s.StrictMode,{children:(0,r.jsx)(q.s,{children:(0,r.jsx)((function(){var e,t,n,o,a=this,i=(0,s.useState)((function(){try{var e=localStorage.getItem("backlog-tool-config");if(e)return JSON.parse(e)}catch(e){}return{spaceUrl:"",apiKey:"",projectId:"",issueKeyRange:{from:"",to:""},searchMode:"parent"}})),c=i[0],l=i[1],u=(0,s.useState)([]),d=u[0],L=u[1],T=(0,s.useState)([]),B=T[0],D=T[1],M=(0,s.useState)(!1),U=M[0],_=M[1],F=(0,s.useState)(""),W=F[0],J=F[1],$=(0,s.useState)(""),G=$[0],H=$[1],Y=(0,s.useState)(null),q=Y[0],Q=Y[1],V=(0,s.useState)([]),X=V[0],Z=V[1],ee=(0,s.useState)({totalIssues:0,totalAttachments:0,totalSize:0}),te=ee[0],ne=ee[1],re=(0,s.useState)((function(){try{var e=localStorage.getItem("backlog-tool-parent-issue-key");if(e)return e}catch(e){}return""})),se=re[0],oe=re[1],ae=(0,s.useState)(""),ie=ae[0],ce=ae[1],le=(0,s.useState)(!1),ue=le[0],de=le[1],he=(0,s.useState)(null),pe=he[0],me=he[1];(0,s.useEffect)((function(){try{localStorage.setItem("backlog-tool-config",JSON.stringify(c))}catch(e){}}),[c]),(0,s.useEffect)((function(){try{localStorage.setItem("backlog-tool-parent-issue-key",se)}catch(e){}}),[se]);var fe=function(e,t){l((function(n){var r;return K(K({},n),((r={})[e]=t,r))}))};return(0,r.jsxs)(p.a,{maxW:"900px",mx:"auto",p:6,bg:(0,m.dU)("white","gray.800"),borderRadius:"lg",boxShadow:"md",children:[(0,r.jsx)(f.D,{as:"h1",size:"lg",mb:6,children:"Backlog Attachment Cleaner"}),(0,r.jsxs)(p.a,{mb:8,p:6,bg:(0,m.dU)("gray.50","gray.700"),borderRadius:"md",boxShadow:"sm",children:[(0,r.jsx)(f.D,{as:"h2",size:"md",mb:4,children:"Settings"}),(0,r.jsxs)(g.B,{spacing:4,children:[(0,r.jsxs)(p.a,{children:[(0,r.jsx)(b.E,{mb:1,children:"Space URL:"}),(0,r.jsx)(v.p,{value:c.spaceUrl,onChange:function(e){return fe("spaceUrl",e.target.value)},placeholder:"https://your-space.backlog.com"})]}),(0,r.jsxs)(p.a,{children:[(0,r.jsx)(b.E,{mb:1,children:"API Key:"}),(0,r.jsx)(v.p,{type:"password",value:c.apiKey,onChange:function(e){return fe("apiKey",e.target.value)},placeholder:"Your API Key"})]}),(0,r.jsxs)(y.$,{colorScheme:"blue",onClick:function(){return z(a,void 0,void 0,(function(){var e,t,n;return O(this,(function(r){switch(r.label){case 0:if(!c.spaceUrl||!c.apiKey)return J("Please enter Space URL and API Key"),[2];_(!0),J(""),r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,(e=new h(c.spaceUrl,c.apiKey)).testConnection()];case 2:return r.sent(),Q(e),[4,e.getProjects()];case 3:return t=r.sent(),L(t),H("Connection successful"),[3,6];case 4:return n=r.sent(),J(n.message),Q(null),L([]),[3,6];case 5:return _(!1),[7];case 6:return[2]}}))}))},isDisabled:U||!c.spaceUrl||!c.apiKey,mb:2,children:[U?(0,r.jsx)(x.y,{size:"sm",mr:2}):null,U?"Testing connection...":"Test Connection"]}),d.length>0&&(0,r.jsxs)(p.a,{children:[(0,r.jsx)(b.E,{mb:1,children:"Project:"}),(0,r.jsx)(w.l,{value:c.projectId,onChange:function(e){return fe("projectId",e.target.value)},placeholder:"Select a project",children:d.map((function(e){return(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.projectKey,")"]},e.id)}))})]})]})]}),(0,r.jsxs)(p.a,{mb:8,p:6,bg:(0,m.dU)("gray.50","gray.700"),borderRadius:"md",boxShadow:"sm",children:[(0,r.jsx)(f.D,{as:"h2",size:"md",mb:4,children:"Search Options"}),(0,r.jsxs)(j.t,{variant:"enclosed",colorScheme:"blue",index:"parent"===c.searchMode?0:1,onChange:function(e){return fe("searchMode",0===e?"parent":"range")},children:[(0,r.jsxs)(I.w,{children:[(0,r.jsx)(S.o,{children:"Search by Parent Issue"}),(0,r.jsx)(S.o,{children:"Search by Issue Range"})]}),(0,r.jsxs)(k.T,{children:[(0,r.jsx)(A.K,{px:0,children:(0,r.jsx)(g.B,{spacing:3,children:(0,r.jsxs)(p.a,{children:[(0,r.jsx)(b.E,{mb:1,children:"Parent Issue Key:"}),(0,r.jsxs)(C.s,{children:[(0,r.jsx)(v.p,{value:se,onChange:function(e){return oe(e.target.value)},placeholder:"PROJECT-123",mr:2}),(0,r.jsxs)(y.$,{colorScheme:"blue",onClick:function(){return z(a,void 0,void 0,(function(){var e,t,n,r;return O(this,(function(s){switch(s.label){case 0:if(!se)return J("Please enter the parent issue key"),[2];if(!q)return J("API is not initialized. Please test the connection."),[2];_(!0),J(""),H(""),D([]),Z([]),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,q.getParentAndChildIssuesWithAttachments(se)];case 2:return e=s.sent(),D(e),t=e.reduce((function(e,t){return e+t.attachments.length}),0),n=e.reduce((function(e,t){return e+t.attachments.reduce((function(e,t){return e+(t.size||0)}),0)}),0),ne({totalIssues:e.length,totalAttachments:t,totalSize:n}),0===e.length?H("No attachments found."):H("Found attachments in ".concat(e.length," issues.")),[3,5];case 3:return r=s.sent(),J(r.message),[3,5];case 4:return _(!1),[7];case 5:return[2]}}))}))},isDisabled:U||!se,children:[U?(0,r.jsx)(x.y,{size:"sm",mr:2}):null,U?"Searching...":"Search"]})]}),(0,r.jsx)(b.E,{fontSize:"sm",color:"gray.500",mt:1,children:"Enter the parent issue key (e.g., PROJECT-123). Attachments for the parent and its child issues will be displayed."})]})})}),(0,r.jsx)(A.K,{px:0,children:(0,r.jsx)(g.B,{spacing:3,children:(0,r.jsxs)(p.a,{children:[(0,r.jsx)(b.E,{mb:1,children:"Issue Key Range:"}),(0,r.jsxs)(C.s,{align:"center",children:[(0,r.jsx)(v.p,{value:(null===(e=c.issueKeyRange)||void 0===e?void 0:e.from)||"",onChange:function(e){return fe("issueKeyRange",K(K({},c.issueKeyRange),{from:e.target.value}))},placeholder:"PROJECT-123",mr:2}),(0,r.jsx)(b.E,{mx:2,children:"to"}),(0,r.jsx)(v.p,{value:(null===(t=c.issueKeyRange)||void 0===t?void 0:t.to)||"",onChange:function(e){return fe("issueKeyRange",K(K({},c.issueKeyRange),{to:e.target.value}))},placeholder:"PROJECT-456",mr:2}),(0,r.jsxs)(y.$,{colorScheme:"blue",onClick:function(){return z(a,void 0,void 0,(function(){var e,t,n,r,s;return O(this,(function(o){switch(o.label){case 0:if(!q||!c.projectId)return J("Please select a project"),[2];_(!0),J(""),D([]),Z([]),o.label=1;case 1:return o.trys.push([1,3,4,5]),e=c.issueKeyRange?{from:c.issueKeyRange.from.trim(),to:c.issueKeyRange.to.trim()}:null,[4,q.getIssuesWithAttachments(c.projectId,e)];case 2:return t=o.sent(),D(t),n=t.reduce((function(e,t){return e+t.attachments.length}),0),r=t.reduce((function(e,t){return e+t.attachments.reduce((function(e,t){return e+(t.size||0)}),0)}),0),ne({totalIssues:t.length,totalAttachments:n,totalSize:r}),H("Found ".concat(t.length," issues with attachments")),[3,5];case 3:return s=o.sent(),J(s.message),[3,5];case 4:return _(!1),[7];case 5:return[2]}}))}))},isDisabled:U||!(null===(n=c.issueKeyRange)||void 0===n?void 0:n.from)||!(null===(o=c.issueKeyRange)||void 0===o?void 0:o.to),children:[U?(0,r.jsx)(x.y,{size:"sm",mr:2}):null,U?"Searching...":"Search"]})]}),(0,r.jsx)(b.E,{fontSize:"sm",color:"gray.500",mt:1,children:"Specify the range of issue keys to search. Attachments for issues within the specified range will be displayed."})]})})})]})]})]}),(0,r.jsxs)(p.a,{mb:8,p:6,bg:(0,m.dU)("gray.50","gray.700"),borderRadius:"md",boxShadow:"sm",children:[(0,r.jsx)(f.D,{as:"h2",size:"md",mb:4,children:"Delete Attachments by Issue Key"}),(0,r.jsxs)(g.B,{direction:{base:"column",md:"row"},spacing:4,align:"center",children:[(0,r.jsx)(v.p,{value:ie,onChange:function(e){return ce(e.target.value)},placeholder:"PROJECT-123",maxW:"300px"}),(0,r.jsx)(y.$,{colorScheme:"red",onClick:function(){return z(a,void 0,void 0,(function(){var e,t;return O(this,(function(n){switch(n.label){case 0:if(!ie)return J("Please enter an issue key"),[2];if(!q)return J("API is not initialized"),[2];de(!0),J(""),H(""),me(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,q.deleteAllAttachmentsByIssueKey(ie.trim())];case 2:return e=n.sent(),me(e),H("Delete completed for ".concat(ie,". Success: ").concat(e.success,", Failed: ").concat(e.failed)),[3,5];case 3:return t=n.sent(),J(t.message),[3,5];case 4:return de(!1),[7];case 5:return[2]}}))}))},isLoading:ue,disabled:ue||!ie,children:"Delete Attachments"})]}),pe&&(0,r.jsxs)(E.F,{status:"success",mt:4,borderRadius:"md",children:[(0,r.jsx)(R._,{}),"Success: ",pe.success,", Failed: ",pe.failed]})]}),W&&(0,r.jsxs)(E.F,{status:"error",mb:4,borderRadius:"md",children:[(0,r.jsx)(R._,{}),W]}),G&&(0,r.jsxs)(E.F,{status:"success",mb:4,borderRadius:"md",children:[(0,r.jsx)(R._,{}),G]}),B.length>0&&(0,r.jsxs)(p.a,{className:"results-section",mb:8,p:6,bg:(0,m.dU)("gray.50","gray.700"),borderRadius:"md",boxShadow:"sm",children:[(0,r.jsxs)(C.s,{className:"stats",gap:8,mb:6,p:3,bg:(0,m.dU)("gray.100","gray.600"),borderRadius:"md",children:[(0,r.jsxs)(p.a,{children:["Total Issues: ",te.totalIssues]}),(0,r.jsxs)(p.a,{children:["Total Attachments: ",te.totalAttachments]}),(0,r.jsxs)(p.a,{children:["Total File Size: ",N(te.totalSize)]})]}),(0,r.jsxs)(C.s,{className:"actions",gap:4,mb:4,children:[(0,r.jsx)(y.$,{colorScheme:"blue",onClick:function(){if(0===X.length){var e=[];B.forEach((function(t){t.attachments.forEach((function(n){e.push({key:"".concat(t.id,"-").concat(n.id),issueId:t.id,attachmentId:n.id,issueKey:t.issueKey,fileName:n.name,isCommentAttachment:n.isCommentAttachment,commentId:n.commentId||0})}))})),Z(e)}else Z([])},isDisabled:U,children:0===X.length?"Select All":"Deselect All"}),(0,r.jsxs)(y.$,{colorScheme:"red",onClick:function(){return z(a,void 0,void 0,(function(){var e,t,n,r;return O(this,(function(s){switch(s.label){case 0:if(0===X.length)return J("Please select attachments to delete"),[2];if(!window.confirm("Are you sure you want to delete ".concat(X.length," attachments? This action cannot be undone.")))return[2];_(!0),J(""),H(""),s.label=1;case 1:return s.trys.push([1,3,4,5]),q?[4,q.deleteMultipleAttachments(X)]:(J("API is not initialized"),[2]);case 2:return e=s.sent(),t=e.filter((function(e){return e.success})).length,n=e.filter((function(e){return!e.success})).length,H("Delete completed. Success: ".concat(t,", Failed: ").concat(n)),D([]),Z([]),[3,5];case 3:return r=s.sent(),J(r.message),[3,5];case 4:return _(!1),[7];case 5:return[2]}}))}))},isDisabled:U||0===X.length,children:[U?(0,r.jsx)(x.y,{size:"sm",mr:2}):null,U?"Deleting...":"Delete Selected Files (".concat(X.length,")")]})]}),(0,r.jsx)(g.B,{spacing:4,className:"issues-list",children:B.map((function(e){return(0,r.jsxs)(p.a,{className:"issue-card",p:4,borderWidth:1,borderRadius:"md",bg:(0,m.dU)("white","gray.800"),children:[(0,r.jsxs)(C.s,{className:"issue-header",mb:3,align:"center",justify:"space-between",children:[(0,r.jsx)(f.D,{as:"h3",size:"sm",children:e.issueKey}),(0,r.jsx)(b.E,{className:"issue-summary",color:"gray.600",children:e.summary})]}),(0,r.jsx)(g.B,{className:"attachments-list",spacing:2,children:e.attachments.map((function(t){var n=X.some((function(n){return n.key==="".concat(e.id,"-").concat(t.id)}));return(0,r.jsxs)(C.s,{className:"attachment-item",align:"center",justify:"space-between",p:2,borderBottomWidth:1,borderColor:"gray.100",children:[(0,r.jsxs)(p.a,{className:"attachment-info",children:[(0,r.jsxs)(b.E,{className:"attachment-name",fontWeight:"medium",children:[t.name,t.isCommentAttachment&&(0,r.jsx)(b.E,{as:"span",className:"comment-badge",ml:2,fontSize:"xs",bg:"gray.200",borderRadius:"md",px:2,py:1,color:"gray.600",children:"Comment Attachment"})]}),(0,r.jsx)(b.E,{className:"attachment-size",color:"gray.500",fontSize:"sm",children:N(t.size||0)})]}),(0,r.jsxs)(C.s,{align:"center",gap:2,children:[(0,r.jsx)("input",{type:"checkbox",checked:n,onChange:function(){return function(e,t,n,r,s){var o="".concat(e,"-").concat(t);Z((function(a){return a.find((function(e){return e.key===o}))?a.filter((function(e){return e.key!==o})):P(P([],a,!0),[{key:o,issueId:e,attachmentId:t,issueKey:n,fileName:r,isCommentAttachment:s.isCommentAttachment,commentId:s.commentId||0}],!1)}))}(e.id,t.id,e.issueKey,t.name,t)}}),(0,r.jsx)(b.E,{as:"span",children:"Select"})]})]},t.id)}))})]},e.id)}))})]}),U&&(0,r.jsxs)(C.s,{className:"loading-overlay",direction:"column",align:"center",justify:"center",position:"fixed",top:0,left:0,right:0,bottom:0,bg:"rgba(255,255,255,0.8)",zIndex:1e3,children:[(0,r.jsx)(x.y,{size:"xl",color:"blue.500"}),(0,r.jsx)(b.E,{mt:4,color:"gray.600",children:"Processing..."})]})]})}),{})})}))}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return r[e](n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,s)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,s]=e[u],i=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(i=!1,s<a&&(a=s));if(i){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var a={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,o.d(s,a),s},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,i,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(c)var u=c(o)}for(t&&t(n);l<a.length;l++)s=a[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self.webpackChunkbacklog_attachment_cleaner=self.webpackChunkbacklog_attachment_cleaner||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var a=o.O(void 0,[390],(()=>o(8907)));a=o.O(a)})();